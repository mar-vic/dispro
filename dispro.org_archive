#    -*- mode: org -*-


Archived entries from file /home/marek/Projects/dispro/dispro.org


* DONE Posli mailom stav spracovania zbierky
SCHEDULED: <2024-03-16 Sat> CLOSED: [2024-03-17 Sun] 
:PROPERTIES:
:ARCHIVE_TIME: 2024-11-15 Fri 18:36
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:
[2024-03-16 Sat]


* DONE Restore dispro project
SCHEDULED: <2024-02-26 Po> CLOSED: [2024-03-04 Mon 14:34]
:PROPERTIES:
:ARCHIVE_TIME: 2024-11-15 Fri 18:36
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:
[2024-02-26 Po]

* DONE Create a custom pandoc reader for eltec files
CLOSED: [2024-06-18 Tue 16:54]
:PROPERTIES:
:ARCHIVE_TIME: 2025-03-11 Tue 08:55
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:

[[https://pandoc.org/custom-readers.html][Custom reader]] for eltec .xml can be used to
transform eltec files into any type of pandoc output.

Custom reader is simply a lua file that defines a 'Reader' function which takes two arguments:

+ the raw input to be parsed, as a list of sources
+ optionally, a table of reader options,  e.g. { columns = 62, standalone = true }.

The Reader function should return a Pandoc AST. Look here on how to maniplate Pandoc
AST: [[https://pandoc.org/lua-filters.html]]

The reader is then invoked by putting the path to file implementing the reader function
after the -f option when using pandoc command:

#+begin_src
pandoc input -f <file with reader definition> -t <output type> -o output
#+end_src

** DONE Transform eltec file into pandoc's AST
CLOSED: [2024-06-11 Tue 15:19]

+ Create mapping between eltec elements and pandoc AST
+ Extract all eltec elements occuring within <text>
+ Generate pandoc AST out of eltec elements
+ It is possible to modify existing Blocks with function in pandoc.List module


* DONE Sprav vykaz pre JULS
CLOSED: [2024-11-19 Tue 13:42] DEADLINE: <2024-11-25 Mon> SCHEDULED: <2024-11-18 Mon 08:00-09:00>
:PROPERTIES:
:ARCHIVE_TIME: 2025-03-11 Tue 08:55
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:

* DONE Sprav vykazy za februar pre UKF
CLOSED: [2025-01-23 Thu 16:54] SCHEDULED: <2025-01-15 Wed> DEADLINE: <2025-01-31 Fri>
:PROPERTIES:
:ARCHIVE_TIME: 2025-03-11 Tue 08:55
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:

* TODO Write eltec generation scripts
:PROPERTIES:
:ARCHIVE_TIME: 2025-04-08 Tue 10:36
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: TODO
:ARCHIVE_ITAGS: dispro work
:END:
- Eltec generation scripts are implemented in "scripts/dispro.py", "pandoc/readers", "pandoc/writers" directory
** TODO Lua filter for juls note processing is not working           :error:
** TODO Write custom pandoc writer for eltec .xml files
- A custom pandoc writer for eltec files makes it possible to use pandoc to
  generate eltec files out of any of the input types pandoc recognizes
*** References
+ [[https://pandoc.org/MANUAL.html#templates][Pandoc Templates]]
+ [[https://github.com/jgm/pandoc-templates][Pandoc Templates Repo]]
+ [[https://pandoc.org/custom-writers.html][Creating Custom Pandoc Writers in Lua]]
+ [[https://pandoc.org/lua-filters.html#lua-type-reference][Types of objects available to Lua filters]
*** TODO Removing newlines while prettifying seems to leave two spaces
*** TODO Write code for validating whole corpus
*** SOMEDAY Chapters should be wrapped inside <div> according ELTeC standard
- collection of chapters should have the "type" attribute set to "group"
*** DONE Custom writer fails to produce document in some cases
CLOSED: [2024-11-15 Fri 15:19]
- Problematic doc: modra_katedrala
*** DONE timeslot val should be based on frsted.pub_date, if the value is  present
CLOSED: [2024-11-11 Mon 14:26]
- otherwise use srced.pub_date
*** DONE Document titles and subtitles should be put inside the <front> tag
CLOSED: [2024-10-26 Sat 16:33]
- <front> to be generated by filter
- the filter will extract title and subtitle from the source doc metadata, if they are present
- Title and subtitle will be then added at the beginning of pandoc AST with identifiers 
- The identifiers will be then used by eltec writer ti generate the front matter
- Similar method should be then used to generate footnotes
*** DONE Footnotes generation
CLOSED: [2024-10-26 Sat 16:38]
+ Footnotes should be put insed <back></back> sections
*** DONE Generate <head> on the basis of .json metadata
CLOSED: [2024-10-22 Tue 15:33]
- The boilerplate of <head> can be generated with the --template option
- The problem is to provide the parameters to populate template variables
- Custom metadata can be easily set by lua filter
- Steps in generating eletc file:
  1. Use filter to generate template with metadata
  2. Use custom writer to generate eltec file on the basis of previously generated template
  3. Use filter to calulate and set word count in documents head
- Filters can be combined with metadata files, templates and even a custom writer!
- The following data should be calculated>
  - documentId
  - eltecEdition
  - words
  - pages
  - size
  - timeSlot
*** DONE Pretty printing xml
CLOSED: [2024-10-21 Mon 14:59]
*** DONE Learn how to use templates in a custom writer
CLOSED: [2024-07-02 Tue 14:03]
+ Custom templates can be accessed programmatically in user data dir with "pandoc.template.default(*FORMAT*)"
+ But they are not "visible"  to "pandoc -D *FORMAT*" command
+ Custom template file can be specified with --template <path to template file>
+ It should also be possible to specify custom template programmatically in custom readers / writers
** TODO Write emacs macros for annotating ELTeC .xml files
** TODO Write tests for eltec generation
+ Test eltec from pdf transformation
+ Test eltec from html transformation
+ Test eltec from images transformation
+ Test metadata generation
+ Generated files should be valid according to eltec standard
** TODO Use AI to correct OCR artefacts
The "autocorrect" should identify all misspelled words within the file and use 
the predictive capabilities of LLM to correct the misspelling. The script
should be able to run in guided mode in which, if there more options to correct 
the misspeling, user is prompted to chose one.
*** References
+ [[https://www.geeksforgeeks.org/autocorrector-feature-using-nlp-in-python/][Autocorrector Feature Using NLP In Python]]
+ [[https://pypi.org/project/pyspellchecker/][pyspellchecker]]
+ [[https://towardsdatascience.com/ocr-typo-detection-9dd6e396ecac]]
+ [[https://zenodo.org/records/3515403][Dataset of ICDAR 2019 Competition on Post-OCR Text Correction]]
+ [[https://qwenlm.github.io/blog/qwen2-vl/][Qwen2-VL-7B Instruct LLM model for OCR]]
  + [[https://x.com/simonw/status/1831207719745077493]]
+ [[https://generativehistory.substack.com/p/introducing-transcription-pearl][Introducing Transcription Pearl]]
  + [[https://github.com/mhumphries2323/Transcription_Pearl][Transcription Pearl GitHub]]

* DONE Rozveď tretiu časť osnovy
CLOSED: [2025-04-18 Fri 11:28]
:PROPERTIES:
:ARCHIVE_TIME: 2025-04-18 Fri 11:28
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_OLPATH: Napis ucebnicu
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:
:LOGBOOK:
- State "TODO"       from "IN-PROGRESS" [2025-03-30 Sun 11:26]
- State "IN-PROGRESS" from              [2025-03-30 Sun 11:26]
:END:

* DONE Založ dokument pre učebnicu
CLOSED: [2025-04-18 Fri 11:27]
:PROPERTIES:
:ARCHIVE_TIME: 2025-04-18 Fri 11:28
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_OLPATH: Napis ucebnicu
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:
:LOGBOOK:
- State "DONE"       from "IN-PROGRESS" [2025-04-18 Fri 11:27]
- State "IN-PROGRESS" from "NEXT"       [2025-04-01 Tue 10:57]
- State "IN-PROGRESS" from              [2025-03-30 Sun 11:15]
:END:
- https://maehr.github.io/academic-pandoc-template/

* DONE Sprav osnovu učebnice
CLOSED: [2025-03-30 Sun 11:14] SCHEDULED: <2025-02-20 Thu>
:PROPERTIES:
:ARCHIVE_TIME: 2025-04-18 Fri 11:28
:ARCHIVE_FILE: ~/Projects/dispro/dispro.org
:ARCHIVE_OLPATH: Napis ucebnicu
:ARCHIVE_CATEGORY: dispro
:ARCHIVE_TODO: DONE
:ARCHIVE_ITAGS: dispro work
:END:
:LOGBOOK:
- State "DONE"       from "IN-PROGRESS" [2025-03-30 Sun 11:14]
- State "IN-PROGRESS" from "TODO"       [2025-03-29 Sat 08:41] \\
  Založil som dokument s osnovou učebnice.
:END:
